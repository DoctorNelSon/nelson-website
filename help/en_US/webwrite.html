<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns = "http://www.w3.org/1999/xhtml">
<!--
SAME AS NELSON SOFTWARE
-->

<head>
<meta name="generator" content=
"HTML Generated by Nelson"/>
<link rel="stylesheet" type="text/css" href="style.css" />
<link rel="stylesheet" href="mono-blue.css"  type="text/css" />
<script src = "highlight.pack.js" type = "text/javascript">
</script>
<script type = "text/javascript">hljs.initHighlightingOnLoad();</script>
</script>
	<meta http-equiv="Content-Type" content = "text/html; charset=utf-8" />
	<title>webwrite</title>

</head>
<body>

<div class = "manualnavbar">
<table width = "100%"><tr>

<td width="30%" class="previous">
<span class="top"><a href="websave.html">&lt;&lt; websave</a></span>
</td>

<td width="40%" class="center">
<span class="top"><a href="chapter_webtools.html">Web tools</a></span>
</td>

</tr></table>
<hr />

<h1 class="refname">webwrite</h1>
<hr/>

<h3>Write data to RESTful web service</h3>
<hr/>

<h3>Syntax</h3>
<hr/>

<table summary="syntax" style="width:50%">
	<tr>
		<td>response = webwrite(url, data)</td>
	</tr>

	<tr>
		<td>response = webwrite(url, data, options)</td>
	</tr>

	<tr>
		<td>response = webwrite(url, name1, value1, ... , nameN, valueN)</td>
	</tr>

	<tr>
		<td>response = webwrite(url, name1, value1, ... , nameN, valueN, options)</td>
	</tr>

</table>

<h3>Input argument</h3>
<hr/>

<dl>
<dt><span class="term">url</span></dt>
<dd>
<p class="para">a string: URL to a web service.</p>
</dd>

<dt><span class="term">data</span></dt>
<dd>
<p class="para">Data to post to a web service, an nelson's variable.</p>
</dd>

<dt><span class="term">name1, value1, ... , nameN, valueN</span></dt>
<dd>
<p class="para">Name-Value Pair Arguments, Data to post to a web service.</p>
</dd>

<dt><span class="term">options</span></dt>
<dd>
<p class="para">a weboptions object.</p>
</dd>

</dl>

<h3>Output argument</h3>
<hr/>

<dl>
<dt><span class="term">response</span></dt>
<dd>
<p class="para">a variable: Response from a web service.</p>
</dd>

</dl>

<h3>Description</h3>
<hr/>

<p></p>

  <p><b>webwrite</b> write data to RESTful web service.</p>


<h3>Examples</h3>
<hr/>

<p>Send message to Slack</p>
<pre>
<code class = "nelson">[Y, M, D, H, MN, S] = datevec(now);
datetime = sprintf('%d/%d/%d %d:%d:%d', Y, M, D, H, MN, S);
// hide url to slack
url = char([104 116 116 112 115 58 47 47 104 111 111 107 115 46 115 108 97 99 107 46 99 111 109 47 115 101 114 118 105 99 101 115 47 84 77 82 71 56 82 72 68 50 47 66 77 83 48 76 72 65 65 67 47 81 54 52 97 52 49 84 83 76 104 105 78 71 81 108 100 51 115 76 50 86 109 74 71]);
data = struct('text', ['hello from Nelson ', datetime], 'channel', '#test_webwrite');
R = webwrite(url, data);
</code>
</pre>
<p>Connect to your NetAtmo Weather station (oAuth2 connection)</p>
<pre>
<code class = "nelson">USER_NAME = 'your username';
PASSWORD = 'your password';
CLIENT_ID = 'your client id';
CLIENT_SECRET = 'your client secret';
DEVICE_ID = 'your device id';

url = 'https://api.netatmo.com/oauth2/token';
args = {'grant_type', 'password', 'username', USER_NAME, 'password', PASSWORD, 'client_id', CLIENT_ID, 'client_secret', CLIENT_SECRET};
response = webwrite(url, args{:});
r = webread('https://api.netatmo.com/api/getstationsdata', 'access_token', response.access_token, 'device_id', DEVICE_ID);
disp('Devices')
disp(r.body.devices)
disp('Location Info')
disp(r.body.devices.place)
disp('Last values')
disp(r.body.devices.dashboard_data)
</code>
</pre>

<h3>See also</h3>
<hr/>

<p>
<a href = "weboptions.html" class = "link">weboptions</a>, <a href = "webread.html" class = "link">webread</a>.</p>

<h3>History</h3>
<hr/>

<table summary = "history" style="width:50%">
<tr>
	<th>Version</th>
	<th>Description</th>
</tr>
<tr>
	<td>1.0.0</td>
	<td>initial version</td>
</tr>

</table>

<h3>Author</h3>
<hr/>

<p>Allan CORNET</p>

<div class = "manualnavbar">
<table width = "100%"><tr>

<td width="30%" class="previous">
<span class="top"><a href="websave.html">&lt;&lt; websave</a></span>
</td>

<td width="40%" class="center">
<span class="top"><a href="chapter_webtools.html">Web tools</a></span>
</td>

</tr></table>
<hr />

</body>

</html>

